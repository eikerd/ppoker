<div class="poker-table" *ngIf="session">
  <div class="table-header">
    <button class="back-button" (click)="backToLobby()">‚Üê Back to Lobby</button>
    <h2>Session: {{ session.id }}</h2>
    <div class="player-count">{{ session.players.length }} players</div>
  </div>

  <div class="player-zone">
    <app-player-card
      *ngFor="let player of session.players"
      [player]="player"
      [hasVoted]="hasPlayerVoted(player.id)"
      [isDealer]="player.isDealer"
    ></app-player-card>
  </div>

  <div class="card-area">
    <div class="status-message" *ngIf="!isVotingActive && !showResults">
      <p *ngIf="isDealer">Click "Start Round" to begin voting</p>
      <p *ngIf="!isDealer">Waiting for dealer to start the round...</p>
    </div>
    <app-voting-cards
      [disabled]="!isVotingActive"
      (cardSelected)="placeVote($event)"
    ></app-voting-cards>
  </div>

  <div class="dealer-controls" *ngIf="isDealer">
    <button
      (click)="startRound()"
      class="pixel-button pixel-button--primary"
    >
      Start Round
    </button>
    <button
      (click)="revealVotes()"
      [disabled]="!canReveal"
      class="pixel-button pixel-button--success"
    >
      Reveal Votes
    </button>
  </div>

  <app-results-table
    *ngIf="!isVotingActive && session.currentRound && session.currentRound.statistics"
    [votes]="session.currentRound.votes"
    [statistics]="session.currentRound.statistics || null"
    [dealerId]="session.dealerId"
  ></app-results-table>
</div>
